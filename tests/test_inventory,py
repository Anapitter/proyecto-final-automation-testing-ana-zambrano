from utils import login_saucedmo, agregar_producto_al_carrito
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC

def test_verificar_catalogo(driver):
    login_saucedmo(driver)
    WebDriverWait(driver, 10).until(
        EC.presence_of_element_located((By.CLASS_NAME, "title"))
    )
    titulo = driver.find_element(By.CLASS_NAME, "title").text
    assert titulo == "Products"
    logo = driver.find_element(By.CLASS_NAME, "app_logo").text
    assert logo == "Swag Labs"
    productos = driver.find_elements(By.CLASS_NAME, "inventory_item")
    assert len(productos) > 0

def test_agregar_carrito(driver):
    login_saucedmo(driver)
    nombre, precio = agregar_producto_al_carrito(driver)
    driver.find_element(By.CLASS_NAME, "shopping_cart_link").click()
    item_carrito = WebDriverWait(driver, 10).until(
        EC.visibility_of_element_located((By.CLASS_NAME, "inventory_item_name"))
    )
    assert item_carrito.text == nombre
